<!DOCTYPE html>
<meta charset="utf-8">
<title>D3.js SVG</title>
<head>
<link href='http://fonts.googleapis.com/css?family=Lato:300,400' rel='stylesheet' type='text/css'>
<link href='assets/stylesheets/style.css' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="assets/javascripts/d3.min.js"></script>
<!-- <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script> -->
 <script type="text/javascript" src="http://localhost:48626/takana.js"></script>
 <script type="text/javascript">
   takanaClient.run({host: 'localhost:48626'});
 </script>
</head>
<body>
<header class="title">
	<h1></h1>
	<h2 class="subtitle"></h2>
</header>
<section>
	<svg id="chart1925_1930"></svg>
</section>
<script type="text/javascript">
	d3.select(".title h1")
		.text("Corrida de São Silvestre - SP");
	d3.select(".subtitle")
		.text("Evolução dos tempos 1925 - 1930");

  var dataset = [ 23.10, 22.32, 23.00, 29.11 ];
  var datatwo = [ 1925, 1926, 1927, 1928 ];

  //Width and height
  var w = 600;
      h = 100;
      barWidth = 4;
      barOffset = 5;

  var yScale = d3.scale.linear()
      .domain([0, d3.max(dataset)])
      .range([0, h])

  var xScale = d3.scale.ordinal()
      .domain(d3.range(0, datatwo.length))
      .rangeBands([0, w])

  //Create SVG element
  d3.select("#chart1925_1930").append("svg")
      .attr("width", w)
      .attr("height", h)
      .append("g")
      .style("background", "#CCCCCC")
      .selectAll("rect").data(dataset)
      .enter().append("rect")
          .style("fill", "#185daa")
          .attr("width", barWidth)
          .attr("height", function(d){
              return yScale(d);
          })
          .attr('x', function(d,i) {
              return i * (barWidth + barOffset);
          })
          // .attr('y', function(d) { // change bar directions, down to top
          //     return h - d;
          // })

      // mouse events
      .on("mouseover", function(d){
          d3.select(this)
              .style("opacity",".5")
      })
      .on("mouseout", function(d){
          d3.select(this)
              .style("opacity","1")
      })

  var vAxis = d3.svg.axis()
      .scale(yScale)
      .orient("left")
      .ticks(10)

  var vGuide = d3.select("svg").append("g")
      vAxis(vGuide)
      vGuide.attr("transform", "translate(35, 0)")
      vGuide.selectAll("path")
        .style({fill: "none", stroke: "#444"})
      vGuide.selectAll("line")
        .style({stroke: "#444"})

  var hAxis = d3.svg.axis()
      .scale(xScale)
      .orient("bottom")
      .tickValues(xScale.domain().filter(function(d,i) {
          return !(i % (dataset.length/5));
      }))

  var hGuide = d3.select("svg").append("g")
      hAxis(hGuide)
      hGuide.attr("transform", "translate(0," + (height-30) + ")")
      hGuide.selectAll("path")
        .style({fill: "none", stroke: "#444"})
      hGuide.selectAll("line")
        .style({stroke: "#444"})

</script>
</body>
</html>